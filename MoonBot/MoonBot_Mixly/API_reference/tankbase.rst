底盘控制
=========

**底盘控制** 包含了驱动 MoonBot Kit :doc:`../../MoonBot_Hardware/MoonBot_Hardware_motor` 以及电机内编码器的驱动。

通过调用这些模块，可以让电机底盘运动起来。

.. image:: images/input.png

翻转方向
---------

.. image:: images/tankbase_reverse.png

:描述:

    翻转电机的运动方向。

:参数:

    :翻转方向:

        - ``true`` ：翻转方向
        - ``false`` ：默认方向

直行偏移校正
-------------

.. image:: images/tankbase_straight_correction.png

:描述:

    因为摩擦、安装偏差等扰动存在，底盘直行时会存在往某一方向偏移的情况。
    
    通过 ``直行偏移校正`` 模块，可以校正外部扰动引起的直行偏移。

:参数:

    :直行偏移校正（%）:

        - ``0~200`` ：>100向右侧校正，<100向左侧校正

直行距离校正
-------------

.. image:: images/tankbase_distance_correction.png

:描述:

    因为摩擦、安装偏差等扰动存在，底盘直行一定距离时会存在直行路程不到位的情况。
    
    通过 ``直行距离校正`` 模块，可以校正外部扰动引起的直行距离不到位的情况。

    校正直行距离前，建议先进行 ``直行偏移校正`` 。

:参数:

    :直行距离校正（%）:

        - ``0~+∞`` ：>100直行距离增大，<100直行距离减小

转弯角度校正
-------------

.. image:: images/tankbase_angle_correction.png

:描述:

    因为摩擦、安装偏差等扰动存在，底盘转动一定角度时会存在转弯角度不到位的情况。
    
    通过 ``转弯角度校正`` 模块，可以校正外部扰动引起的转弯角度不到位的情况。

    校正转弯角度前，建议先进行 ``直行偏移校正`` 和 ``直行距离校正``。

:参数:

    :转弯角度校正（%）:

        - ``0~+∞`` ：>100转弯角度增大，<100转弯角度减小

前进
---------

.. image:: images/tankebase_forward.png

:描述:

    控制底盘以给定速度向前直行至给定距离后停止。

    该模块 **会调用编码器模块**，务必保证对应的编码器已连接至对应的端口。

:参数:

    :前进距离（cm）:

        - ``距离值`` ：给定直行距离，单位：厘米（cm）
    
    :转速:

        - ``转速值`` ：给定直行电机转速，单位：转/分（RPM）

后退
---------

.. image:: images/tankebase_backward.png

:描述:

    控制底盘以给定速度向后直行至给定距离后停止。

    该模块 **会调用编码器模块**，务必保证对应的编码器已连接至对应的端口。

:参数:

    :后退距离（cm）:

        - ``距离值`` ：给定直行距离，单位：厘米（cm）
    
    :转速:

        - ``转速值`` ：给定直行电机转速，单位：转/分（RPM）

左转
---------

.. image:: images/tankebase_left.png

:描述:

    控制底盘以给定速度左转至给定角度后停止。

    该模块 **会调用编码器模块**，务必保证对应的编码器已连接至对应的端口。

:参数:

    :左转角度（°）:

        - ``角度值`` ：给定直行距离，单位：度（°）
    
    :转速:

        - ``转速值`` ：给定直行电机转速，单位：转/分（RPM）

右转
---------

.. image:: images/tankebase_right.png

:描述:

    控制底盘以给定速度右转至给定角度后停止。

    该模块 **会调用编码器模块**，务必保证对应的编码器已连接至对应的端口。

:参数:

    :右转角度（°）:

        - ``角度值`` ：给定直行距离，单位：度（°）
    
    :转速:

        - ``转速值`` ：给定直行电机转速，单位：转/分（RPM）

停止
---------

.. image:: images/tankebase_stop.png

:描述:

    底盘停止转动。

电机写入值
-----------

.. image:: images/tankebase_write.png

:描述:

    向对应端口的电机写入模拟量。

:参数:

    :电机端口:

        - ``1`` ：电机端口1
        - ``2`` ：电机端口2
    
    :值:

        - ``±255`` ：写入模拟量的值，>0向前转，<0向后转，=0停止转动

电机读取值
-----------

.. image:: images/tankebase_read.png

:描述:

    读取对应电机端口模拟量的值。

:参数:

    :电机端口:

        - ``1`` ：电机端口1
        - ``2`` ：电机端口2
    
:返回:

    - ``值`` ：电机模拟量的值

电机写入转速
-------------

.. image:: images/tankebase_write_rpm.png

:描述:

    向对应端口的电机写入转速。

    该模块 **会调用编码器模块**，务必保证对应的编码器已连接至对应的端口。

:参数:

    :电机端口:

        - ``1`` ：电机端口1
        - ``2`` ：电机端口2
    
    :值:

        - ``±60`` ：写入模拟量的值，>0向前转，<0向后转，=0停止转动，单位：转/分（RPM）

电机读取转速
-------------

.. image:: images/tankebase_read_rpm.png

:描述:

    读取对应电机端口的转速。

:参数:

    :电机端口:

        - ``1`` ：电机端口1
        - ``2`` ：电机端口2
    
:返回:

    - ``转速`` ：电机的转速，单位：转/分（RPM）

